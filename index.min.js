!function n(i,r,a){function c(o,t){if(!r[o]){if(!i[o]){var e="function"==typeof require&&require;if(!t&&e)return e(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}e=r[o]={exports:{}};i[o][0].call(e.exports,function(t){var e=i[o][1][t];return c(e||t)},e,e.exports,n,i,r,a)}return r[o].exports}for(var s="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.offsets=function(t){for(var e=[],o=0;o<t.length;o++)e.push(this.offset(t[o]));return e},i.prototype.distance=function(t){return Math.sqrt(this.distanceSquare(t))},i.prototype.isIn=function(t,e){return(t.getRow()>this.getRow()&&this.getRow()>e.getRow()||e.getRow()>this.getRow()&&this.getRow()>t.getRow())&&(t.getCol()>this.getCol()&&this.getCol()>e.getCol()||e.getCol()>this.getCol()&&this.getCol()>t.getCol())},i.prototype.isFarther=function(t,e){return e*e<this.distanceSquare(t)},i.prototype.isNeighbor=function(t){return this.getRow()==t.getRow()?this.getCol()-t.getCol()==i.NEIGHBOR||t.getCol()-this.getCol()==i.NEIGHBOR:this.getCol()==t.getCol()&&(this.getRow()-t.getRow()==i.NEIGHBOR||t.getRow()-this.getRow()==i.NEIGHBOR)},i.prototype.distanceSquare=function(t){return(this.getRow()-t.getRow())*(this.getRow()-t.getRow())+(this.getCol()-t.getCol())*(this.getCol()-t.getCol())},i.prototype.equal=function(t){return t.getRow()==this.getRow()&&t.getCol()==this.getCol()},i.prototype.isIncluded=function(t){for(var e=0;e<t.length;++e)if(this.equal(t[e]))return!0;return!1},i.NEIGHBOR=1,i);function i(){}o.default=n},{}],2:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./coordinate_adaptor"),c=t("./coordinate_value"),i=(r=a.default,i(s,r),s.prototype.getRow=function(){return this.row()},s.prototype.getCol=function(){return this.col()},s.prototype.toStatic=function(){return new c.default(this.row(),this.col())},s.prototype.offset=function(t){var e=this;return new s(function(){return e.row()+t.getRow()},function(){return e.col()+t.getCol()})},s.prototype.offsetTo=function(t,e){var o=this;return new s(function(){return o.row()+(t.getRow()-o.row())*e},function(){return o.col()+(t.getCol()-o.col())*e})},s.prototype.floor=function(){var t=this;return new s(function(){return Math.floor(t.row())},function(){return Math.floor(t.col())})},s.prototype.negative=function(){var t=this;return new s(function(){return 0-t.row()},function(){return 0-t.col()})},s.prototype.split=function(t){var e=this;return new s(function(){return e.row()/(0==t.getRow()?1:t.getRow())},function(){return e.col()/(0==t.getCol()?1:t.getCol())})},s.prototype.swell=function(t){var e=this;return new s(function(){return e.row()*t.getRow()},function(){return e.col()*t.getCol()})},s.prototype.radiation=function(t){for(var e=[],o=Math.ceil(this.row()-t);o<=Math.floor(this.row()+t);++o)for(var n,i=Math.ceil(this.col()-t);i<=Math.floor(this.col()+t);++i)o==this.row()&&i==this.col()||(n=new c.default(o,i),this.isFarther(n,t)||e.push(n));return e},s);function s(t,e){var o=r.call(this)||this;return o.row=t,o.col=e,o}o.default=i},{"./coordinate_adaptor":1,"./coordinate_value":3}],3:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./coordinate_adaptor"),i=(r=t.default,i(a,r),a.prototype.getRow=function(){return this.row},a.prototype.getCol=function(){return this.col},a.prototype.toStatic=function(){return this},a.prototype.offset=function(t){return new a(this.row+t.getRow(),this.col+t.getCol())},a.prototype.offsetTo=function(t,e){return new a(this.row+(t.getRow()-this.row)*e,this.col+(t.getCol()-this.col)*e)},a.prototype.floor=function(){return new a(Math.floor(this.row),Math.floor(this.col))},a.prototype.negative=function(){return new a(0-this.row,0-this.col)},a.prototype.split=function(t){return new a(this.row/(0==t.getRow()?1:t.getRow()),this.col/(0==t.getCol()?1:t.getCol()))},a.prototype.swell=function(t){return new a(this.row*t.getRow(),this.col*t.getCol())},a.prototype.radiation=function(t){for(var e=[],o=Math.ceil(this.row-t);o<=Math.floor(this.row+t);++o)for(var n,i=Math.ceil(this.col-t);i<=Math.floor(this.col+t);++i)o==this.row&&i==this.col||(n=new a(o,i),this.isFarther(n,t)||e.push(n));return e},a.crossSeed=function(){return[a.UP,a.LEFT,a.DOWN,a.RIGHT]},a.umbrellaSeed=function(){return[a.UP,a.LEFTUP,a.RIGHTUP]},a.UNIT=new a(1,1),a.HALF=new a(.5,.5),a.ORIGIN=new a(0,0),a.UP=new a(-1,0),a.DOWN=new a(1,0),a.LEFT=new a(0,-1),a.RIGHT=new a(0,1),a.RIGHTUP=new a(-1,1),a.RIGHTDOWN=new a(1,1),a.LEFTUP=new a(-1,-1),a.LEFTDOWN=new a(1,-1),a);function a(t,e){var o=r.call(this)||this;return o.row=t,o.col=e,o}o.default=i},{"./coordinate_adaptor":1}],4:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.setFrom=function(t){this.from=t},i.prototype.start=function(t){this.startStamp=t},i.DEFAULT_START_STAMP=Number.MAX_VALUE,i);function i(){this.startStamp=i.DEFAULT_START_STAMP}o.default=n},{}],5:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./event_adapter"),i=(r=t.default,i(a,r),a.prototype.getLocation=function(t){return this.from},a.prototype.getEndLocation=function(t){return this.from},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.default=i},{"./event_adapter":4}],6:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./event_adapter"),i=(r=t.default,i(a,r),a.prototype.getLocation=function(t){return this.newLocation},a.prototype.getEndLocation=function(t){return this.newLocation},a);function a(t){var e=r.call(this)||this;return e.newLocation=t,e}o.default=i},{"./event_adapter":4}],7:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./event_adapter"),i=(r=t.default,i(a,r),a.prototype.getLocation=function(t){return t<=this.startStamp?this.from:t>=this.startStamp+this.timeCost?this.to:this.move(this.from,this.to,this.timeCost,t-this.startStamp)},a.prototype.getEndLocation=function(t){return this.safe?this.to:this.getLocation(t)},a);function a(t,e,o,n){var i=r.call(this)||this;return i.to=t,i.timeCost=e,i.safe=o,i.move=n,i}o.default=i},{"./event_adapter":4}],8:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("./event/event_keep"),t=(i.prototype.initEvent=function(){this.setEvent(new n.default)},i.prototype.getLocation=function(t){return this.location=this.event.getLocation(t),this.location},i.prototype.setEvent=function(t){null!=this.event&&(this.location=this.event.getEndLocation(Date.now())),t.setFrom(this.location),(this.event=t).start(Date.now())},i);function i(t){this.location=t,this.initEvent()}o.default=t},{"./event/event_keep":5}],9:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("./node"),t=(a.prototype.get=function(t){for(var e=this.head,o=0;null!=e;){if(t==o)return e.data;e=e.next,o++}return null},a.prototype.iterate=function(t){for(var e=this.head,o=0;null!=e;)t(o,e.data),e=e.next,o++},a.prototype.iterateInterruptible=function(t){for(var e=this.head,o=0,n=!0;n&&null!=e;)n=t(o,e.data),e=e.next,o++},a.prototype.isEmpty=function(){return 0==this.length},a.prototype.size=function(){return this.length},a.prototype.append=function(t){var e=new r.default;if(e.data=t,this.isEmpty())return this.head=e,this.tail=e,void this.length++;this.tail.next=e,this.tail=e,this.length++},a.prototype.deduct=function(){if(0==this.length)return null;var t=this.tail.data;if(this.tail==this.head)return this.head=null,this.tail=null,this.length--,t;var e=this.getNodePrevious(this.length-a.IndexStep);return e.next=null,this.tail=e,this.length--,t},a.prototype.shift=function(t){var e=new r.default;if(e.data=t,this.isEmpty())return this.head=e,this.tail=e,void this.length++;e.next=this.head,this.head=e,this.length++},a.prototype.unshift=function(){if(0==this.length)return null;var t=this.head.data;return this.head==this.tail?(this.tail=null,this.head=null):this.head=this.head.next,this.length--,t},a.prototype.insert=function(t,e){var o;e<=0?this.shift(t):e>=this.length?this.append(t):(this.length++,(o=new r.default).data=t,e=this.getNodePrevious(e),o.next=e.next,e.next=o)},a.prototype.insertBy=function(t,e){for(var o=this.head,n=0;null!=o;){if(e(o.data)){var i=new r.default;return i.data=t,i.next=o.next,o.next=i,this.length++,n+a.IndexStep}o=o.next,n++}return this.append(t),n},a.prototype.removeAt=function(t){if(t<0||t>=this.length)return null;if(0==t)return this.unshift();if(t==this.length-a.IndexStep)return this.deduct();var e=this.getNodePrevious(t),t=e.next.data;return e.next=e.next.next,this.length--,t},a.prototype.removeBy=function(t){if(0==this.length)return null;if(t(this.head.data)){var e=this.head.data;return this.head=this.head.next,this.length--,this.length=0,e}for(var o=null,n=this.head;null!=n&&!t(n.data);)n=(o=n).next;return null==n?null:(o.next=n.next,this.length--,n==this.tail&&(this.tail=o),n.data)},a.prototype.indexBy=function(t){for(var e=this.head,o=0;null!=e;){if(t(e.data))return o;o++,e=e.next}return-1},a.prototype.clear=function(){this.length=0,this.head=null,this.tail=null},a.prototype.getNodePrevious=function(t){if(t<=0||t>this.length)return null;for(var e=1,o=this.head;e<t;)o=o.next,e++;return o},a.IndexStep=1,a);function a(){this.head=null,this.tail=null,this.length=0}o.default=t},{"./node":10}],10:[function(t,e,o){"use strict";o.__esModule=!0;function n(){this.data=null,this.next=null}o.default=n},{}],11:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../linked_list/linked_list"),t=(i.prototype.on=function(t){null!=t&&this.listeners.append(t)},i.prototype.cut=function(e){this.listeners.removeBy(function(t){return t==e})},i.prototype.clear=function(){this.listeners.clear()},i);function i(){this.listeners=new n.default}o.default=t},{"../linked_list/linked_list":9}],12:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./listener_adapter"),i=(r=t.default,i(a,r),a.prototype.trigger=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return this.listeners.iterate(function(t,e){e.apply(void 0,o)}),null},a);function a(){return null!==r&&r.apply(this,arguments)||this}o.default=i},{"./listener_adapter":11}],13:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.setCallback=function(t){return this.callback=t,this},i.delay=function(t){return function(){setTimeout(t,0)}},i.prototype.call=function(){null!=this.callback&&this.callback()},i);function i(){}o.default=n},{}],14:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./once_adapter"),i=(r=a.default,i(c,r),c.prototype.getCallback=function(){var t=this;return a.default.delay(function(){t.hasCalled||(t.hasCalled=!0,t.call())})},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.hasCalled=!1,t}o.default=i},{"./once_adapter":13}],15:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./once_adapter"),i=(r=a.default,i(c,r),c.prototype.getCallback=function(){var t=this;return this.counter++,a.default.delay(function(){t.counter--,0==t.counter&&t.call()})},c);function c(){var t=null!==r&&r.apply(this,arguments)||this;return t.counter=0,t}o.default=i},{"./once_adapter":13}],16:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.addFactor=function(t,e){return void 0===e&&(e=i.DEFAULT_WEIGHT),e<0&&(e=0),this.factors.push(t),this.totalWeight+=e,this.weights.push(this.totalWeight),this},i.prototype.getFactor=function(){if(0==this.factors.length)return null;for(var t=Math.random()*this.totalWeight,e=0;e<this.weights.length;e++)if(t<this.weights[e])return this.factors[e];return null},i.DEFAULT_WEIGHT=1,i);function i(){this.factors=[],this.weights=[],this.totalWeight=0}o.default=n},{}],17:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.toRGB=function(){return"rgb("+this.r+","+this.g+","+this.b+")"},i.prototype.toRGBA=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},i.prototype.toHex=function(){return"#"+i.toHex(this.r)+i.toHex(this.g)+i.toHex(this.b)},i.toHex=function(t){var e=t.toString(i.HEX_RADIX);return t<i.HEX_RADIX&&(e="0"+e),e},i.HEX_RADIX=16,i.DEFAULT_ALPHA=1,i);function i(t,e,o,n){void 0===n&&(n=i.DEFAULT_ALPHA),this.r=t,this.g=e,this.b=o,this.a=n}o.default=n},{}],18:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.setSize=function(t){return this.size=t,this},i.prototype.setFamily=function(t){return this.family=t,this},i.prototype.setAlign=function(t){return this.align=t,this},i.prototype.setBaseline=function(t){return this.baseline=t,this},i.ALIGN_START="start",i.ALIGN_END="end",i.ALIGN_LEFT="left",i.ALIGN_RIGHT="right",i.ALIGN_CENTER="center",i.BASELINE_TOP="top",i.BASELINE_HANGING="hanging",i.BASELINE_MIDDLE="middle",i.BASELINE_ALPHABETIC="alphabetic",i.BASELINE_IDEOGRAPHIC="ideographic",i.BASELINE_BOTTOM="bottom",i.DEFAULT_SIZE=1,i.DEFAULT_FAMILY="sans-serif",i.DEFAULT_ALIGN=i.ALIGN_START,i.DEFAULT_BASELINE=i.BASELINE_ALPHABETIC,i);function i(){this.family=i.DEFAULT_FAMILY,this.size=i.DEFAULT_SIZE,this.align=i.DEFAULT_ALIGN,this.baseline=i.DEFAULT_BASELINE}o.default=n},{}],19:[function(t,e,o){"use strict";o.__esModule=!0;function n(){}o.default=n},{}],20:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./birth_weight"),c=t("./birth_item"),s=t("./birth_adapter"),t=t("../item/item_creator"),t=(r=s.default,i(l,r),l.prototype.getItem=function(){return this.birth.getItem()},l.prototype.popItem=function(){return this.getItem()},l.Eliminates=[t.default.APPLE,t.default.BLUEBERRY,t.default.FLOWER,t.default.LEAF,t.default.PEAR,t.default.WATER],l);function l(t){void 0===t&&(t=[]);var e=r.call(this)||this;e.birth=new a.default;for(var o=0;o<l.Eliminates.length;o++){for(var n=!0,i=0;i<t.length;i++)l.Eliminates[o]==t[i]&&(n=!1);n&&e.birth.addBirthWeight(new c.default(l.Eliminates[o]))}return e}o.default=t},{"../item/item_creator":61,"./birth_adapter":19,"./birth_item":22,"./birth_weight":23}],21:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("../item/prop/item_empty"),t=t("./birth_adapter"),i=(r=t.default,i(c,r),c.prototype.getItem=function(){return a.default.getEmpty()},c.prototype.popItem=function(){return a.default.getEmpty()},c.getEmpty=function(){return c.instance},c.instance=new c,c);function c(){return r.call(this)||this}o.default=i},{"../item/prop/item_empty":63,"./birth_adapter":19}],22:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("../item/item_creator"),t=t("./birth_adapter"),i=(r=t.default,i(c,r),c.prototype.getItem=function(){return a.default.createItem(this.itemCreatorId)},c.prototype.popItem=function(){return this.getItem()},c);function c(t){var e=r.call(this)||this;return e.itemCreatorId=t,e}o.default=i},{"../item/item_creator":61,"./birth_adapter":19}],23:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./birth_empty"),c=t("./birth_adapter"),s=t("../../concept/random_weight"),i=(r=c.default,i(l,r),l.prototype.addBirthWeight=function(t,e){return this.random.addFactor(t,e),this},l.prototype.getBirth=function(){var t=this.random.getFactor();return null==t?a.default.getEmpty():t},l.prototype.getItem=function(){return this.getBirth().getItem()},l.prototype.popItem=function(){return this.getBirth().popItem()},l);function l(){var t=r.call(this)||this;return t.random=new s.default,t}o.default=i},{"../../concept/random_weight":16,"./birth_adapter":19,"./birth_empty":21}],24:[function(t,e,o){"use strict";o.__esModule=!0;var i=t("../cell/cell_adapter"),n=t("../sacrifice/click"),r=t("../sacrifice/exchange"),a=t("../../concept/coordinate/coordinate_value"),c=t("../../concept/coordinate/locus"),s=t("./board_puzzle"),l=t("./board_check"),u=t("./board_explode"),p=t("./board_scrape"),f=t("./board_polymerize"),d=t("./board_arrivable"),h=t("./board_fall"),_=t("./board_exchange"),g=t("./board_click"),y=t("./board_on"),t=(m.prototype.setCells=function(t,e,o){var n=this;this.births=e,this.exits=o,this.cells=t,this.explode=new u.default(this.cells),this.scrape=new p.default(this.cells),this.arrivable=new d.default(this.cells,this.births),this.fall=new h.default(this.cells,this.births,this.exits,this.arrivable),this.check=new l.default(this.cells),this.polymerize=new f.default(this.cells,this.scrape,this.fall,this.check),this.exchange=new _.default(this.cells,this.fall,this.polymerize,this.check),this.click=new g.default(this.cells,this.fall),this.on=new y.default(this.cells,this.exits,this.click,this.exchange,this.fall),this.cells.iterate(function(t,e){return n.getPuzzle().addChild(e.getPuzzle(),new c.default(t),m.PUZZLE_CELL_Z_INDEX),!0}),this.exits.iterate(function(t){n.getPuzzle().addChild(t.getPuzzle(),new c.default(t.getLocation()),m.PUZZLE_EXIT_Z_INDEX)}),this.puzzle.setSize(this.cells.size().swell(i.default.RENDER_SIZE))},m.prototype.getOn=function(){return this.on},m.prototype.start=function(){this.active=!0,this.fall.start()},m.prototype.close=function(){this.active=!1},m.prototype.size=function(){return null==this.cells?a.default.ORIGIN:this.cells.size()},m.prototype.resizePuzzle=function(t){},m.prototype.getPuzzle=function(){return this.puzzle},m.LoadStaticResource=function(t,e,o){e()},m.PUZZLE_CELL_Z_INDEX=10,m.PUZZLE_EXIT_Z_INDEX=11,m);function m(){var o=this;this.active=!1,this.puzzle=new s.default,this.puzzle.onBoardClick.on(function(t){o.active&&o.click.click(new n.default(t))}),this.puzzle.onBoardExchange.on(function(t,e){o.active&&o.exchange.exchange(new r.default(t,e))})}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/coordinate/locus":8,"../cell/cell_adapter":39,"../sacrifice/click":65,"../sacrifice/exchange":66,"./board_arrivable":25,"./board_check":28,"./board_click":29,"./board_exchange":30,"./board_explode":32,"./board_fall":33,"./board_on":34,"./board_polymerize":35,"./board_puzzle":37,"./board_scrape":38}],25:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/coordinate_value"),t=(i.prototype.isArrivable=function(t){if(t.getRow()<0||t.getRow()>=this.arrivable.length)return!1;var e=this.arrivable[t.getRow()];return!(t.getCol()<0||t.getCol()>=e.length)&&this.arrivable[t.getRow()][t.getCol()]},i.prototype.update=function(){var e=this;this.arrivable=[];for(var t=0;t<this.cells.size().getRow();t++){this.arrivable.push([]);for(var o=0;o<this.cells.size().getCol();o++)this.arrivable[t].push(!1)}this.births.iterate(function(t){e.updateLocation(t.getLocation())})},i.prototype.updateLocation=function(t){this.cells.getCellByLocation(t).canRobbed()&&(this.arrivable[t.getRow()][t.getCol()]=!0,this.updateLocation(t.offset(n.default.LEFTDOWN)),this.updateLocation(t.offset(n.default.DOWN)),this.updateLocation(t.offset(n.default.RIGHTDOWN)))},i);function i(t,e){this.cells=t,this.births=e,this.arrivable=[]}o.default=t},{"../../concept/coordinate/coordinate_value":3}],26:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.getBirth=function(t){for(var e=0;e<this.birth.length;e++){var o=this.birth[e];if(t.equal(o.getLocation()))return o}return null},i.prototype.iterate=function(t){for(var e=0;e<this.birth.length;e++)t(this.birth[e])},i);function i(t){void 0===t&&(t=[]),this.birth=t}o.default=n},{}],27:[function(t,e,o){"use strict";o.__esModule=!0;var c=t("../../concept/coordinate/coordinate_value"),s=t("../cell/cell_empty"),r=t("../../concept/once/once_last"),n=t("../../concept/listener/listener_diffusion"),t=(i.prototype.itemCleared=function(t){this.onItemClear.trigger(t)},i.prototype.exploded=function(t,e,o){for(var n=(new r.default).setCallback(o),i=0;i<this.explodedListener.length;i++)this.explodedListener[i](t,e,n.getCallback())},i.prototype.onExplode=function(t){this.explodedListener.push(t)},i.prototype.getCells=function(){return this.cells},i.prototype.setCells=function(t){var o=this;null==t&&(t=[]),this.cellsSize=i.formatCells(t),this.cells=t,this.iterate(function(t,e){return e.setOwner(o),!0})},i.prototype.iterate=function(t){t:for(var e=0;e<this.cellsSize.getRow();e++)for(var o=0;o<this.cellsSize.getCol();o++)if(!t(new c.default(e,o),this.cells[e][o]))break t},i.prototype.size=function(){return this.cellsSize},i.prototype.getCellByLocation=function(t){return t.getRow()>=this.cellsSize.getRow()||t.getRow()<0||t.getCol()>=this.cellsSize.getCol()||t.getCol()<0?s.default.getEmpty():this.cells[t.getRow()][t.getCol()]},i.prototype.getLocationOfCell=function(t){for(var e=0;e<this.cells.length;++e)for(var o=0;o<this.cells[e].length;++o)if(this.cells[e][o]==t)return new c.default(e,o);return new c.default(0,0)},i.formatCells=function(t,e){if(null==e){for(var o=t.length,n=0,i=0;i<o;i++)null!=(r=t[i])&&r.length>n&&(n=r.length);e=new c.default(o,n)}for(var r,i=0;i<e.getRow();i++){null==(r=t[i])&&(r=[],t[i]=r);for(var a=0;a<e.getCol();a++)null==r[a]&&(r[a]=s.default.getEmpty())}return e},i.CHECK_NUMBER_SELF=1,i.CHECK_NUMBER_OK_MINIZE=3,i);function i(){this.cellsSize=c.default.ORIGIN,this.onItemClear=new n.default,this.explodedListener=[]}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/listener/listener_diffusion":12,"../../concept/once/once_last":15,"../cell/cell_empty":42}],28:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("./board_cells"),a=t("../sacrifice/polymerize"),c=t("../../concept/coordinate/coordinate_value"),t=(n.prototype.check=function(){var o=this,n=null,i=0;return this.cells.iterate(function(t,e){t=o.checkPosition(t);return null==t||(null==n||n.getGuests().length<t.getGuests().length||n.getGuests().length==t.getGuests().length&&i<e.getUpdateTime())&&(n=t,i=e.getUpdateTime()),!0}),n},n.prototype.checkPosition=function(t){var e=0;if(!this.cells.getCellByLocation(t).getItem().canPolymerize())return null;var o=[],n=this.checkPositionDirection(t,c.default.UP).concat(this.checkPositionDirection(t,c.default.DOWN)),i=this.checkPositionDirection(t,c.default.LEFT).concat(this.checkPositionDirection(t,c.default.RIGHT));return n.length+r.default.CHECK_NUMBER_SELF>=r.default.CHECK_NUMBER_OK_MINIZE&&(o=o.concat(n),e++),i.length+r.default.CHECK_NUMBER_SELF>=r.default.CHECK_NUMBER_OK_MINIZE&&(o=o.concat(i),e++),0==e?null:new a.default(t,o)},n.prototype.checkPositionDirection=function(t,e){for(var o=[],n=this.cells.getCellByLocation(t).getItem();;){var i=t.offset(e);if(!n.equals(this.cells.getCellByLocation(i).getItem()))break;o.push(i),t=i}return o},n);function n(t){this.cells=t}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../sacrifice/polymerize":68,"./board_cells":27}],29:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/once/once_first"),i=t("../../concept/listener/listener_diffusion"),t=(r.prototype.click=function(t){var e=this,o=this.cells.getCellByLocation(t.getLocation()).beClicked((new n.default).setCallback(function(){e.onClick.trigger(o),e.fall.start()}).getCallback())},r);function r(t,e){this.cells=t,this.fall=e,this.onClick=new i.default}o.default=t},{"../../concept/listener/listener_diffusion":12,"../../concept/once/once_first":14}],30:[function(t,e,o){"use strict";o.__esModule=!0;var l=t("../../concept/once/once_last"),i=t("../../concept/listener/listener_diffusion"),t=(n.prototype.exchange=function(n){var i,r,a,c=this,s=(new l.default).setCallback(function(){c.fall.start()});null!=n&&n.isNeighbor()?(i=this.cells.getCellByLocation(n.getFrom()),r=this.cells.getCellByLocation(n.getTo()),a=i.exchange(r,n.getTo().offset(n.getFrom().negative()),function(){if(!a)return c.onExchange.trigger(!1),void s.getCallback()();var t=c.check.check();null!=t&&c.polymerize.polymerize(t,s.getCallback());var e=i.beExchanged(s.getCallback()),o=r.beExchanged(s.getCallback());null!=t||e||o?c.onExchange.trigger(!0):(c.onExchange.trigger(!1),i.exchange(r,n.getTo().offset(n.getFrom().negative()),s.getCallback()))})):s.getCallback()()},n);function n(t,e,o,n){this.cells=t,this.fall=e,this.polymerize=o,this.check=n,this.onExchange=new i.default}o.default=t},{"../../concept/listener/listener_diffusion":12,"../../concept/once/once_last":15}],31:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/listener/listener_diffusion"),t=(i.prototype.itemCleared=function(t){this.onItemClear.trigger(t)},i.prototype.getExit=function(t){for(var e=0;e<this.exit.length;e++){var o=this.exit[e];if(t.equal(o.getLocation()))return o}return null},i.prototype.iterate=function(t){for(var e=0;e<this.exit.length;e++)t(this.exit[e])},i.prototype.exploded=function(t,e,o){o()},i);function i(t){void 0===t&&(t=[]);var e=this;this.exit=t,this.onItemClear=new n.default,this.iterate(function(t){return t.setOwner(e),!0})}o.default=t},{"../../concept/listener/listener_diffusion":12}],32:[function(t,e,o){"use strict";o.__esModule=!0;var a=t("../sacrifice/explode"),c=t("../../concept/once/once_last"),t=(n.prototype.explode=function(t,e,o){for(var t=this.cells.getLocationOfCell(t),e=new a.default(t,e),n=e.getGuests(),i=(new c.default).setCallback(o),r=0;r<n.length;++r)this.cells.getCellByLocation(n[r]).beExploded(i.getCallback());this.cells.getCellByLocation(e.getOwner()).beExploded(i.getCallback())},n);function n(t){var n=this;this.cells=t,this.cells.onExplode(function(t,e,o){n.explode(t,e,o)})}o.default=t},{"../../concept/once/once_last":15,"../sacrifice/explode":67}],33:[function(t,e,o){"use strict";o.__esModule=!0;var l=t("../../concept/once/once_last"),u=t("../../concept/coordinate/coordinate_value"),i=t("../../concept/listener/listener_diffusion"),r=t("../../concept/random_weight"),t=(n.prototype.start=function(t){var e=this;this.onNextFallEnd.on(t),this.isFalling||(this.isFalling=!0,this.fall(function(t){e.onNextFallEnd.trigger(),e.onNextFallEnd.clear(),e.onFallEnd.trigger(),e.isFalling=!1}))},n.prototype.beforeFallEnd=function(t){null!=t&&this.plugins.push(t)},n.prototype.plugin=function(t){var e=(new l.default).setCallback(t);if(0==this.plugins.length)return e.getCallback()(),!1;for(var o=0;o<this.plugins.length;o++)if(this.plugins[o](e.getCallback()))return!0;return!1},n.prototype.fall=function(e){var i=this,r=!1,a=new l.default;a.setCallback(function(){var t;r?i.fall(function(t){e(t=r||t)}):t=i.plugin(function(){t?i.fall(e):null!=e&&e(r)})}),this.arrivable.update(),this.exits.iterate(function(t){var e=t.getLocation(),o=[],n=[];i.getVictimsByExit(e,o,n),r=t.rob(o,n,a.getCallback())||r});for(var t=this.cells.size().getRow()-1;0<=t;t--)for(var o=0;o<this.cells.size().getCol();o++){var n,c,s=new u.default(t,o);this.cells.getCellByLocation(s).isEmpty()||(n=[],c=[],this.getVictimsByLocation(s,n,c),r=this.cells.getCellByLocation(s).rob(n,c,a.getCallback())||r)}},n.prototype.getVictimsByExit=function(t,e,o){var n=this.cells.getCellByLocation(t);(this.arrivable.isArrivable(t)||n.canRobbed()&&!n.getItem().isEmpty())&&(e.push(n),o.push(u.default.ORIGIN))},n.prototype.getVictimsByLocation=function(t,e,o){var n=this.births.getBirth(t);if(null!=n)return e.push(n),void o.push(u.default.UP);var i=[];i.push(u.default.UP),this.chooser.getFactor()?(i.push(u.default.LEFTUP),i.push(u.default.RIGHTUP)):(i.push(u.default.RIGHTUP),i.push(u.default.LEFTUP));for(var r=t.offsets(i),a=0;a<i.length;a++){var c=r[a],s=this.cells.getCellByLocation(c);if(this.arrivable.isArrivable(c)||s.canRobbed()&&!s.getItem().isEmpty()){e.push(s),o.push(i[a]);break}}},n);function n(t,e,o,n){this.cells=t,this.births=e,this.exits=o,this.arrivable=n,this.onFallEnd=new i.default,this.onNextFallEnd=new i.default,this.plugins=[],this.isFalling=!1,this.chooser=(new r.default).addFactor(!1).addFactor(!0)}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/listener/listener_diffusion":12,"../../concept/once/once_last":15,"../../concept/random_weight":16}],34:[function(t,e,o){"use strict";o.__esModule=!0;var a=t("../../concept/listener/listener_diffusion"),t=function(t,e,o,n,i){var r=this;this.cells=t,this.exits=e,this.click=o,this.exchange=n,this.fall=i,this.onStep=new a.default,this.onFallEnd=new a.default,this.onItemClear=new a.default,this.click.onClick.on(function(t){t&&r.onStep.trigger()}),this.exchange.onExchange.on(function(t){t&&r.onStep.trigger()}),this.fall.onFallEnd.on(function(){return r.onFallEnd.trigger()}),this.cells.onItemClear.on(function(t){return r.onItemClear.trigger(t)}),this.exits.onItemClear.on(function(t){return r.onItemClear.trigger(t)})};o.default=t},{"../../concept/listener/listener_diffusion":12}],35:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("../../concept/once/once_last"),t=(n.prototype.polymerize=function(t,e){if(0!=t.getGuests().length){var o=new r.default;o.setCallback(e);for(var n=t.getGuests(),i=0;i<n.length;++i)this.cells.getCellByLocation(n[i]).bePolymerizedAsGuest(o.getCallback());this.cells.getCellByLocation(t.getOwner()).bePolymerizedAsOwner(n.length+1,o.getCallback()),this.scrape.scrape(t.getScrape(),o.getCallback())}else e()},n);function n(t,e,o,n){var i=this;this.cells=t,this.scrape=e,this.fall=o,this.check=n,this.fall.beforeFallEnd(function(t){var e=i.check.check();return null==e?(t(),!1):(i.polymerize(e,t),!0)})}o.default=t},{"../../concept/once/once_last":15}],36:[function(t,e,o){"use strict";o.__esModule=!0;var i=t("./board_cells"),r=t("../sacrifice/exchange"),a=t("../../concept/coordinate/coordinate_value"),t=(n.prototype.precheck=function(){var o,n=this;return this.cells.iterate(function(t,e){return null==(o=n.precheckPositon(t))}),o},n.prototype.precheckPositon=function(t){var e=this.cells.getCellByLocation(t);if(!e.canExchange())return null;var o=e.getItem();if(!o.canPolymerize())return null;for(var n=t.offsets(a.default.crossSeed()),i=0;i<n.length;i++)if(this.precheckPositonCross(o,n[i],t))return new r.default(t,n[i]);return null},n.prototype.precheckPositonCross=function(t,e,o){var n=[].concat(this.precheckPositionDirection(t,e,o,a.default.UP)).concat(this.precheckPositionDirection(t,e,o,a.default.DOWN)),o=[].concat(this.precheckPositionDirection(t,e,o,a.default.LEFT)).concat(this.precheckPositionDirection(t,e,o,a.default.RIGHT));return n.length+i.default.CHECK_NUMBER_SELF>=i.default.CHECK_NUMBER_OK_MINIZE||o.length+i.default.CHECK_NUMBER_SELF>=i.default.CHECK_NUMBER_OK_MINIZE},n.prototype.precheckPositionDirection=function(t,e,o,n){for(var i=[];;){var r=e.offset(n);if(r.equal(o))break;if(!t.equals(this.cells.getCellByLocation(r).getItem()))break;i.push(r),e=r}return i},n);function n(t){this.cells=t}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../sacrifice/exchange":66,"./board_cells":27}],37:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,s=t("../../concept/coordinate/coordinate_value"),a=t("../../render/puzzle"),c=t("../../concept/listener/listener_diffusion"),i=(r=a.default,i(l,r),l.getNeighbor=function(t,e){if(t.isNeighbor(e))return e;for(var o,n=[t.offset(s.default.LEFT),t.offset(s.default.RIGHT),t.offset(s.default.UP),t.offset(s.default.DOWN)],i=Number.MAX_VALUE,r=0;r<n.length;r++){var a=n[r],c=a.distance(e);c<i&&(i=c,o=a)}return o},l.MaxClickTimeout=1e3,l);function l(){var o=r.call(this)||this;return o.isHold=!1,o.isHoldActive=!1,o.lastClickTimeStamp=0,o.onBoardExchange=new c.default,o.onBoardClick=new c.default,o.onMouseDown(function(t){return t=t.floor(),o.startLocation=t,o.isHold=!0,!(o.isHoldActive=!0)}),o.onMouseUp(function(t){t=t.floor();var e=Date.now();return o.isHold&&o.isHoldActive&&o.startLocation.equal(t)&&(null!=o.lastClickLocation&&o.lastClickLocation.equal(t)&&o.lastClickTimeStamp+l.MaxClickTimeout>e?(o.onBoardClick.trigger(t),o.lastClickLocation=null,o.lastClickTimeStamp=0):(o.lastClickLocation=t,o.lastClickTimeStamp=e)),o.isHoldActive=!1,o.isHold=!1,o.startLocation=null,!1}),o.onMouseMove(function(t){return t=t.floor(),o.isHold&&o.isHoldActive&&!o.startLocation.equal(t)&&(o.onBoardExchange.trigger(o.startLocation,l.getNeighbor(o.startLocation,t)),o.isHoldActive=!1),!1}),o}o.default=i},{"../../concept/coordinate/coordinate_value":3,"../../concept/listener/listener_diffusion":12,"../../render/puzzle":85}],38:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("../../concept/once/once_last"),t=(n.prototype.scrape=function(t,e){var o=new r.default;o.setCallback(e);for(var n=t.getGoals(),i=0;i<n.length;++i)this.cells.getCellByLocation(n[i]).beScraped(o.getCallback())},n);function n(t){this.cells=t}o.default=t},{"../../concept/once/once_last":15}],39:[function(t,e,o){"use strict";o.__esModule=!0;var s=t("./cell_empty"),n=t("../../render/puzzle"),i=t("../../render/atom/atom_image"),r=t("../../concept/coordinate/coordinate_value"),a=t("../../concept/coordinate/locus"),c=t("../../concept/coordinate/event/event_move"),l=t("../../concept/coordinate/event/event_location_setter"),u=t("../item/prop/item_empty"),t=(p.prototype.isEmpty=function(){return!1},p.prototype.setOwner=function(t){this.owner=t},p.prototype.renderSaveBack=function(t,e){t=new l.default(t);this.itemLocus.setEvent(t);e=new c.default(r.default.ORIGIN,e,!1,function(t,e,o,n){return t.offsetTo(e,n/o)});this.itemLocus.setEvent(e)},p.prototype.getItem=function(){return null==this.item?u.default.getEmpty():this.item},p.prototype.popItem=function(){if(this.timeUpdate(),null==this.item)return u.default.getEmpty();var t=this.item;return this.puzzle.removeChild(t.getPuzzle()),this.item.setOwner(null),this.item=null,this.itemLocus=null,t},p.prototype.setItem=function(t){this.timeUpdate(),this.itemLocus=new a.default(r.default.ORIGIN),this.getPuzzle().addChild(t.getPuzzle(),this.itemLocus,p.PUZZLE_ITEM_Z_INDEX),null!=(this.item=t)&&this.item.setOwner(this)},p.prototype.itemCleared=function(t){t==this.item&&(this.timeUpdate(),this.item=null,(this.itemLocus=null)!=this.owner&&this.owner.itemCleared(t))},p.prototype.itemClearedAnimationEnd=function(t){this.puzzle.removeChild(t.getPuzzle())},p.prototype.itemCreated=function(t){},p.prototype.itemCreatedAnimationEnd=function(t){},p.prototype.bePolymerizedAsOwner=function(t,e){this.getItem().bePolymerizedAsOwner(t,e)},p.prototype.bePolymerizedAsGuest=function(t){this.getItem().bePolymerizedAsGuest(t)},p.prototype.beExploded=function(t){this.getItem().beExploded(t)},p.prototype.beScraped=function(t){this.getItem().beScraped(t)},p.prototype.beClicked=function(t){return this.getItem().beClicked(t)},p.prototype.beExchanged=function(t){return this.getItem().beExchanged(t)},p.prototype.rob=function(t,e,o){if(!this.getItem().isEmpty())return o(),!1;for(var n,i=s.default.getEmpty(),r=0;r<t.length;r++){var a=t[r];if(a.canRobbed()&&!a.getItem().isEmpty()){i=a,n=e[r];break}}if(i.isEmpty())return o(),!1;var c=i.popItem();return c.isEmpty()?(o(),!1):(this.setItem(c),this.renderSaveBack(n,p.ROB_SAVE_BACK_TIME_COST),setTimeout(function(){o()},p.ROB_SAVE_BACK_TIME_COST),!0)},p.prototype.exchange=function(t,e,o){if(!this.canExchange()||!t.canExchange())return o(),!1;var n=this.popItem(),i=t.popItem();return this.setItem(i),t.setItem(n),this.renderSaveBack(e,p.EXCHANGE_SAVE_BACK_TIME_COST),t.renderSaveBack(e.negative(),p.EXCHANGE_SAVE_BACK_TIME_COST),setTimeout(o,p.EXCHANGE_SAVE_BACK_TIME_COST),!0},p.prototype.exploded=function(t,e){null!=this.owner?this.owner.exploded(this,t,e):e()},p.prototype.getUpdateTime=function(){return this.updateTime},p.prototype.timeUpdate=function(){this.updateTime=Date.now()},p.prototype.resizePuzzle=function(t){},p.prototype.getPuzzle=function(){return this.puzzle},p.RENDER_SIZE=r.default.UNIT,p.PUZZLE_ITEM_Z_INDEX=10,p.ROB_SAVE_BACK_TIME_COST=120,p.EXCHANGE_SAVE_BACK_TIME_COST=200,p);function p(){this.updateTime=0,this.puzzle=new n.default,this.puzzle.setSize(p.RENDER_SIZE),this.atom=new i.default(new a.default(this.getBackgroundImageId()),new a.default(p.RENDER_SIZE)),this.puzzle.addAtom(this.atom,new a.default(r.default.ORIGIN),0)}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/coordinate/event/event_location_setter":6,"../../concept/coordinate/event/event_move":7,"../../concept/coordinate/locus":8,"../../render/atom/atom_image":83,"../../render/puzzle":85,"../item/prop/item_empty":63,"./cell_empty":42}],40:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.isEmpty=function(){return!1},i.prototype.setOwner=function(t){},i.prototype.setBirth=function(t,e){this.birth=t,this.location=e},i.prototype.getLocation=function(){return this.location},i.prototype.getItem=function(){return this.birth.getItem()},i.prototype.popItem=function(){return this.birth.popItem()},i.prototype.setItem=function(t){},i.prototype.canRobbed=function(){return!0},i.prototype.canExchange=function(){return!1},i.prototype.bePolymerizedAsOwner=function(t,e){e()},i.prototype.bePolymerizedAsGuest=function(t){t()},i.prototype.beExploded=function(t){t()},i.prototype.beScraped=function(t){t()},i.prototype.beClicked=function(t){return t(),!1},i.prototype.beExchanged=function(t){return t(),!1},i.prototype.rob=function(t,e,o){return o(),!1},i.prototype.exchange=function(t,e,o){return o(),!1},i.prototype.exploded=function(t,e){e()},i.prototype.itemCleared=function(t){},i.prototype.itemClearedAnimationEnd=function(t){},i.prototype.itemCreated=function(t){},i.prototype.itemCreatedAnimationEnd=function(t){},i.prototype.resizePuzzle=function(t){},i.prototype.getPuzzle=function(){return null},i.prototype.renderSaveBack=function(t,e){},i.prototype.getUpdateTime=function(){return 0},i);function i(){}o.default=n},{}],41:[function(t,e,o){"use strict";o.__esModule=!0;var i=t("./cell_land"),r=t("./cell_water"),a=t("../../concept/once/once_last"),t=(n.LoadStaticResource=function(t,e,o){var n=new a.default;n.setCallback(e),i.default.LoadStaticResource(t,n.getCallback(),o),r.default.LoadStaticResource(t,n.getCallback(),o)},n);function n(){}o.default=t},{"../../concept/once/once_last":15,"./cell_land":43,"./cell_water":44}],42:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../item/prop/item_empty"),t=(i.prototype.isEmpty=function(){return!0},i.prototype.getItem=function(){return n.default.getEmpty()},i.prototype.popItem=function(){return n.default.getEmpty()},i.prototype.setItem=function(t){},i.prototype.setOwner=function(t){},i.getEmpty=function(){return i.instance},i.prototype.canRobbed=function(){return!1},i.prototype.canExchange=function(){return!1},i.prototype.exchange=function(t,e,o){return o(),!1},i.prototype.rob=function(t,e,o){return o(),!1},i.prototype.exploded=function(t,e){e()},i.prototype.bePolymerizedAsOwner=function(t,e){e()},i.prototype.bePolymerizedAsGuest=function(t){t()},i.prototype.beExploded=function(t){t()},i.prototype.beScraped=function(t){t()},i.prototype.beClicked=function(t){return t(),!1},i.prototype.beExchanged=function(t){return t(),!1},i.prototype.itemCleared=function(t){},i.prototype.itemClearedAnimationEnd=function(t){},i.prototype.itemCreated=function(t){},i.prototype.itemCreatedAnimationEnd=function(t){},i.prototype.resizePuzzle=function(t){},i.prototype.getPuzzle=function(){return null},i.prototype.renderSaveBack=function(t,e){},i.prototype.getUpdateTime=function(){return 0},i.instance=new i,i);function i(){}o.default=t},{"../item/prop/item_empty":63}],43:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./cell_adapter"),i=(r=t.default,i(a,r),a.prototype.canRobbed=function(){return!0},a.prototype.canExchange=function(){return!0},a.LoadStaticResource=function(t,e,o){a.backgroundImageId=t.registeredImage(a.backgroundImagePath,e,o)},a.prototype.getBackgroundImageId=function(){return a.backgroundImageId},a.backgroundImagePath="/cell_land.png",a);function a(){return r.call(this)||this}o.default=i},{"./cell_adapter":39}],44:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./cell_adapter"),i=(r=t.default,i(a,r),a.prototype.canRobbed=function(){return!1},a.prototype.canExchange=function(){return!1},a.LoadStaticResource=function(t,e,o){a.backgroundImageId=t.registeredImage(a.backgroundImagePath,e,o)},a.prototype.getBackgroundImageId=function(){return a.backgroundImageId},a.backgroundImagePath="/cell_water.png",a);function a(){return r.call(this)||this}o.default=i},{"./cell_adapter":39}],45:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/locus"),i=t("../../concept/coordinate/coordinate_value"),r=t("../../concept/style/color"),a=t("../../concept/style/font"),c=t("../../concept/listener/listener_diffusion"),s=t("../../render/atom/atom_string"),l=t("../../render/puzzle"),t=(u.prototype.initImage=function(t){this.puzzle.addChild(t.getPuzzle(),new n.default(u.PUZZLE_IMAGE_ID_LOCATION),u.PUZZLE_IMAGE_ID_Z_INDEX)},u.prototype.initStep=function(t){this.stepLocus=new n.default(t),this.puzzle.addAtom(new s.default(this.stepLocus,new n.default(this.color),new n.default(this.font)),new n.default(u.PUZZLE_STEPS_LOCATION),u.PUZZLE_STEPS_Z_INDEX)},u.prototype.resizePuzzle=function(t){},u.prototype.getPuzzle=function(){return this.puzzle},u.PUZZLE_IMAGE_ID_Z_INDEX=1,u.PUZZLE_STEPS_Z_INDEX=2,u.PUZZLE_IMAGE_ID_LOCATION=i.default.ORIGIN,u.PUZZLE_STEPS_LOCATION=new i.default(.8,.8),u);function u(){this.color=new r.default(0,0,0),this.font=(new a.default).setSize(.3).setAlign(a.default.ALIGN_CENTER),this.onSuccess=new c.default,this.puzzle=new l.default,this.puzzle.setSize(i.default.UNIT)}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/coordinate/locus":8,"../../concept/listener/listener_diffusion":12,"../../concept/style/color":17,"../../concept/style/font":18,"../../render/atom/atom_string":84,"../../render/puzzle":85}],46:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./goal_adapter"),i=(r=t.default,i(a,r),a);function a(t){var e=r.call(this)||this;return e.on=t,e}o.default=i},{"./goal_adapter":45}],47:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./goal_board_on"),c=t("../../concept/coordinate/event/event_move"),i=(r=a.default,i(s,r),s.prototype.getSteps=function(){return this.steps},s.prototype.stepsMinus=function(){0!=this.steps&&(this.steps--,this.stepLocus.setEvent(new c.default(this.steps,s.STEP_MINUS_TIME_COST,!1,function(t,e,o,n){return Math.floor((e-t)*n/o+t)})),this.isSuccess()&&this.onSuccess.trigger())},s.prototype.isSuccess=function(){return 0==this.steps},s.STEP_MINUS_TIME_COST=300,s);function s(t,e,o){var n=r.call(this,t)||this;return n.item=e,n.steps=o,n.initImage(n.item),n.initStep(o),n.on.onItemClear.on(function(t){n.item.equals(t)&&n.stepsMinus()}),n}o.default=i},{"../../concept/coordinate/event/event_move":7,"./goal_board_on":46}],48:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("../item_adapter"),i=(r=t.default,i(a,r),a.prototype.canPolymerize=function(){return!1},a.prototype.bePolymerizedAsOwner=function(t,e){e()},a.prototype.bePolymerizedAsGuest=function(t){t()},a.prototype.beExploded=function(t){this.boom(t)},a.prototype.beScraped=function(t){t()},a.prototype.beClicked=function(t){return this.boom(t),!0},a.prototype.beExchanged=function(t){return this.boom(t),!0},a.prototype.boom=function(t){var e=this,o=this.owner;this.cleared(function(){o.exploded(e.getExplodeSize(),t)})},a);function a(){return r.call(this)||this}o.default=i},{"../item_adapter":60}],49:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_boom"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.getExplodeSize=function(){return a.EXPLODE_SIZE},a.imagePath="/boom_dynamite.png",a.POLYMERIZE_SIZE=6,a.EXPLODE_SIZE=3.2,a);function a(){return r.call(this)||this}o.default=i},{"./item_boom":48}],50:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_boom"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.getExplodeSize=function(){return a.EXPLODE_SIZE},a.imagePath="/boom_firecracker.png",a.POLYMERIZE_SIZE=4,a.EXPLODE_SIZE=1,a);function a(){return r.call(this)||this}o.default=i},{"./item_boom":48}],51:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_boom"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.getExplodeSize=function(){return a.EXPLODE_SIZE},a.imagePath="/boom_grenade.png",a.POLYMERIZE_SIZE=5,a.EXPLODE_SIZE=2.5,a);function a(){return r.call(this)||this}o.default=i},{"./item_boom":48}],52:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_boom"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.getExplodeSize=function(){return a.EXPLODE_SIZE},a.imagePath="/boom_trotyl.png",a.POLYMERIZE_SIZE=7,a.EXPLODE_SIZE=4.2,a);function a(){return r.call(this)||this}o.default=i},{"./item_boom":48}],53:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/apple.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],54:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/blueberry.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],55:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("../item_adapter"),c=t("../item_creator"),i=(r=a.default,i(s,r),s.prototype.canPolymerize=function(){return!0},s.prototype.bePolymerizedAsOwner=function(e,o){var n=this.owner;this.cleared(function(){var t=c.default.createBoom(e);null!=t&&(t.created(function(){}),n.setItem(t)),o()})},s.prototype.bePolymerizedAsGuest=function(t){this.cleared(t)},s.prototype.beExploded=function(t){this.cleared(t)},s.prototype.beScraped=function(t){t()},s.prototype.beClicked=function(t){return t(),!1},s.prototype.beExchanged=function(t){return t(),!1},s.BOOM_GENERATE_RADIX=3,s);function s(){return r.call(this)||this}o.default=i},{"../item_adapter":60,"../item_creator":61}],56:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/flower.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],57:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/leaf.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],58:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/pear.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],59:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./item_eliminate"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.imagePath="/water.png",a);function a(){return r.call(this)||this}o.default=i},{"./item_eliminate":55}],60:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../render/puzzle"),i=t("../../render/atom/atom_image"),r=t("../../concept/coordinate/coordinate_value"),a=t("../../concept/coordinate/locus"),c=t("../../concept/coordinate/event/event_move"),s=t("../../concept/coordinate/event/event_location_setter"),t=(l.prototype.setOwner=function(t){this.owner=t},l.prototype.cleared=function(t){var e=this;this.atomImageSize.setEvent(new c.default(r.default.ORIGIN,l.ClearedTimeCost,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),this.atomImageLocation.setEvent(new c.default(r.default.HALF,l.ClearedTimeCost,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),null!=this.owner&&this.owner.itemCleared(this),setTimeout(function(){null!=e.owner&&e.owner.itemClearedAnimationEnd(e),t()},l.ClearedTimeCost)},l.prototype.created=function(t){var e=this;this.atomImageSize.setEvent(new s.default(r.default.ORIGIN)),this.atomImageLocation.setEvent(new s.default(r.default.HALF)),this.atomImageSize.setEvent(new c.default(l.DrawImageSize,l.CreatedTimeCost,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),this.atomImageLocation.setEvent(new c.default(l.DrawStart,l.CreatedTimeCost,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),null!=this.owner&&this.owner.itemCreated(this),setTimeout(function(){null!=e.owner&&e.owner.itemCreatedAnimationEnd(e),t()},l.CreatedTimeCost)},l.prototype.resizePuzzle=function(t){},l.prototype.getPuzzle=function(){return this.puzzle},l.prototype.isEmpty=function(){return!1},l.DrawCoefficient=new r.default(.85,.7),l.DrawStart=r.default.UNIT.offset(l.DrawCoefficient.negative()).swell(r.default.HALF),l.DrawImageSize=r.default.UNIT.swell(l.DrawCoefficient),l.CreatedTimeCost=150,l.ClearedTimeCost=150,l);function l(){this.atomImageSize=new a.default(l.DrawImageSize),this.atomImageLocation=new a.default(l.DrawStart),this.puzzle=new n.default,this.puzzle.setSize(r.default.UNIT),this.atom=new i.default(new a.default(this.getImageId()),this.atomImageSize),this.puzzle.addAtom(this.atom,this.atomImageLocation,0)}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../concept/coordinate/event/event_location_setter":6,"../../concept/coordinate/event/event_move":7,"../../concept/coordinate/locus":8,"../../render/atom/atom_image":83,"../../render/puzzle":85}],61:[function(t,e,o){"use strict";o.__esModule=!0;var i=t("../../concept/once/once_last"),n=t("./prop/item_empty"),r=t("./prop/item_drink"),a=t("./prop/item_pinecone"),c=t("./eliminate/item_apple"),s=t("./eliminate/item_blueberry"),l=t("./eliminate/item_flower"),u=t("./eliminate/item_leaf"),p=t("./eliminate/item_pear"),f=t("./eliminate/item_water"),d=t("./boom/item_dynamite"),h=t("./boom/item_firecracker"),_=t("./boom/item_grenade"),g=t("./boom/item_trotyl"),t=(y.createBoom=function(t){if(t<=y.BOOM_GENERATE_RADIX)return null;switch(t){case h.default.POLYMERIZE_SIZE:return y.createItem(y.FIRECRACKER);case _.default.POLYMERIZE_SIZE:return y.createItem(y.GRENADE);case d.default.POLYMERIZE_SIZE:return y.createItem(y.DYNAMITE);case g.default.POLYMERIZE_SIZE:default:return y.createItem(y.TROTYL)}},y.createItem=function(t){switch(t){case y.EMPTY:return n.default.getEmpty();case y.APPLE:return new c.default;case y.DRINK:return new r.default;case y.PINECONE:return new a.default;case y.BLUEBERRY:return new s.default;case y.FLOWER:return new l.default;case y.LEAF:return new u.default;case y.PEAR:return new p.default;case y.WATER:return new f.default;case y.DYNAMITE:return new d.default;case y.FIRECRACKER:return new h.default;case y.GRENADE:return new _.default;case y.TROTYL:return new g.default;default:return n.default.getEmpty()}},y.LoadStaticResource=function(t,e,o){var n=new i.default;n.setCallback(e),c.default.LoadStaticResource(t,n.getCallback(),o),r.default.LoadStaticResource(t,n.getCallback(),o),a.default.LoadStaticResource(t,n.getCallback(),o),s.default.LoadStaticResource(t,n.getCallback(),o),l.default.LoadStaticResource(t,n.getCallback(),o),u.default.LoadStaticResource(t,n.getCallback(),o),p.default.LoadStaticResource(t,n.getCallback(),o),f.default.LoadStaticResource(t,n.getCallback(),o),d.default.LoadStaticResource(t,n.getCallback(),o),h.default.LoadStaticResource(t,n.getCallback(),o),_.default.LoadStaticResource(t,n.getCallback(),o),g.default.LoadStaticResource(t,n.getCallback(),o)},y.EMPTY=0,y.DRINK=1,y.PINECONE=2,y.APPLE=100,y.BLUEBERRY=101,y.FLOWER=102,y.LEAF=103,y.PEAR=104,y.WATER=105,y.DYNAMITE=200,y.FIRECRACKER=201,y.GRENADE=202,y.TROTYL=203,y.BOOM_GENERATE_RADIX=3,y);function y(){}o.default=t},{"../../concept/once/once_last":15,"./boom/item_dynamite":49,"./boom/item_firecracker":50,"./boom/item_grenade":51,"./boom/item_trotyl":52,"./eliminate/item_apple":53,"./eliminate/item_blueberry":54,"./eliminate/item_flower":56,"./eliminate/item_leaf":57,"./eliminate/item_pear":58,"./eliminate/item_water":59,"./prop/item_drink":62,"./prop/item_empty":63,"./prop/item_pinecone":64}],62:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("../item_adapter"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.canPolymerize=function(){return!1},a.prototype.bePolymerizedAsOwner=function(t,e){e()},a.prototype.bePolymerizedAsGuest=function(t){t()},a.prototype.beExploded=function(t){t()},a.prototype.beScraped=function(t){t()},a.prototype.beClicked=function(t){return t(),!1},a.prototype.beExchanged=function(t){return t(),!1},a.imagePath="/drink.png",a);function a(){return r.call(this)||this}o.default=i},{"../item_adapter":60}],63:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../../render/render_adapter"),t=(i.prototype.equals=function(t){return!1},i.getEmpty=function(){return i.instance},i.prototype.canPolymerize=function(){return!1},i.prototype.moved=function(t,e){},i.prototype.bePolymerizedAsOwner=function(t,e){e()},i.prototype.bePolymerizedAsGuest=function(t){t()},i.prototype.beExploded=function(t){t()},i.prototype.beScraped=function(t){t()},i.prototype.beClicked=function(t){return t(),!1},i.prototype.beExchanged=function(t){return t(),!1},i.prototype.cleared=function(t){t()},i.prototype.created=function(t){t()},i.prototype.resizePuzzle=function(t){},i.prototype.getPuzzle=function(){return null},i.prototype.setOwner=function(t){},i.prototype.isEmpty=function(){return!0},i.prototype.getImageId=function(){return n.default.IMAGE_ID_EMPTY},i.instance=new i,i);function i(){}o.default=t},{"../../../render/render_adapter":86}],64:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("../item_adapter"),i=(r=t.default,i(a,r),a.prototype.getImageId=function(){return a.imageId},a.LoadStaticResource=function(t,e,o){a.imageId=t.registeredImage(a.imagePath,e,o)},a.prototype.equals=function(t){return t instanceof a},a.prototype.canPolymerize=function(){return!1},a.prototype.bePolymerizedAsOwner=function(t,e){e()},a.prototype.bePolymerizedAsGuest=function(t){t()},a.prototype.beExploded=function(t){this.cleared(t)},a.prototype.beScraped=function(t){this.cleared(t)},a.prototype.beClicked=function(t){return t(),!1},a.prototype.beExchanged=function(t){return t(),!1},a.imagePath="/pinecone.png",a);function a(){return r.call(this)||this}o.default=i},{"../item_adapter":60}],65:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./sacrifice_adapter"),i=(r=t.default,i(a,r),a.prototype.getLocation=function(){return this.location},a);function a(t){var e=r.call(this)||this;return e.location=t,e}o.default=i},{"./sacrifice_adapter":69}],66:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./sacrifice_adapter"),i=(r=t.default,i(a,r),a.prototype.getFrom=function(){return this.from},a.prototype.getTo=function(){return this.to},a.prototype.isNeighbor=function(){return this.from.isNeighbor(this.to)},a);function a(t,e){var o=r.call(this)||this;return o.from=t,o.to=e,o}o.default=i},{"./sacrifice_adapter":69}],67:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./sacrifice_adapter"),i=(r=t.default,i(a,r),a.prototype.getOwner=function(){return this.owner},a.prototype.getGuests=function(){return this.guests},a);function a(t,e){var o=r.call(this)||this;return o.owner=t,o.guests=[],o.guests=o.owner.radiation(e),o}o.default=i},{"./sacrifice_adapter":69}],68:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("./scrape"),t=t("./sacrifice_adapter"),i=(r=t.default,i(c,r),c.prototype.getScrape=function(){return new a.default(this.guests.concat(this.owner))},c.prototype.getOwner=function(){return this.owner},c.prototype.getGuests=function(){return this.guests},c);function c(t,e){var o=r.call(this)||this;return o.owner=t,o.guests=e,o}o.default=i},{"./sacrifice_adapter":69,"./scrape":70}],69:[function(t,e,o){"use strict";o.__esModule=!0;function n(){}o.default=n},{}],70:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,a=t("../../concept/coordinate/coordinate_value"),t=t("./sacrifice_adapter"),i=(r=t.default,i(c,r),c.prototype.addGoal=function(t){t.isIncluded(this.source)||t.isIncluded(this.goals)||this.goals.push(t)},c.prototype.getGoals=function(){return this.goals},c);function c(t){var e=r.call(this)||this;e.source=t,e.goals=[];for(var o=0;o<e.source.length;++o)e.addGoal(e.source[o].offset(a.default.UP)),e.addGoal(e.source[o].offset(a.default.DOWN)),e.addGoal(e.source[o].offset(a.default.LEFT)),e.addGoal(e.source[o].offset(a.default.RIGHT));return e}o.default=i},{"../../concept/coordinate/coordinate_value":3,"./sacrifice_adapter":69}],71:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("../concept/coordinate/coordinate_value"),a=t("../concept/coordinate/locus"),n=t("../concept/style/font"),i=t("../concept/style/color"),c=t("../concept/once/once_last"),s=t("../concept/coordinate/event/event_location_setter"),l=t("../concept/coordinate/event/event_move"),u=t("../concept/listener/listener_diffusion"),p=t("../render/atom/atom_string"),f=t("../render/puzzle"),t=(d.prototype.addGoal=function(t){var n=this;this.goals=t;var i=(new c.default).setCallback(function(){n.end(!0)});this.goals.map(function(t,e){var o=t.getPuzzle();n.puzzle.addChild(o,new a.default(new r.default((d.GOAL_LOCATION_END.getRow()-d.GOAL_LOCATION.getRow())/(n.goals.length+1)*(e+1)+d.GOAL_LOCATION.getRow()-o.size().getRow()/2,d.GOAL_LOCATION.getCol())),d.GOAL_Z_INDEX),t.onSuccess.on(i.getCallback())})},d.prototype.setOn=function(t){var e=this;this.on=t,this.on.onStep.on(function(){e.stepMinus()}),this.on.onFallEnd.on(function(){0==e.step&&e.end(!1)})},d.prototype.setLevel=function(t){this.level=t,this.levelRender.setEvent(new s.default(this.level))},d.prototype.setStep=function(t){this.step=t,this.stepRender.setEvent(new s.default(this.step))},d.prototype.stepMinus=function(){0!=this.step&&(this.step--,this.stepRender.setEvent(new s.default(this.step)),0==this.step&&this.onStepEnd.trigger())},d.prototype.stepAdd=function(i){var r=this,t=this.step+i;this.stepRender.setEvent(new l.default(t,i*d.STEP_ADD_TIME_COST_PER_STEP,!0,function(t,e,o,n){return Math.floor(r.step+i*n/o)})),this.step=t},d.prototype.end=function(t){this.isEnd||(this.isEnd=!0,this.onEnd.trigger(t))},d.prototype.resizePuzzle=function(t){},d.prototype.getPuzzle=function(){return this.puzzle},d.LoadStaticResource=function(t,e,o){e()},d.SIZE=new r.default(5,1.5),d.STEP_ADD_TIME_COST_PER_STEP=200,d.LEVEL_Z_INDEX=1,d.GOAL_Z_INDEX=2,d.STEP_Z_INDEX=1,d.LEVEL_LOCATION=new r.default(.75,.75),d.GOAL_LOCATION=new r.default(1,.25),d.GOAL_LOCATION_END=new r.default(4,.25),d.STEP_LOCATION=new r.default(4.25,.75),d);function d(){this.color=new i.default(0,0,0),this.font=(new n.default).setSize(.5).setAlign(n.default.ALIGN_CENTER),this.step=1,this.stepRender=new a.default(this.step),this.level="unknown",this.levelRender=new a.default(this.level.toString()),this.puzzle=new f.default,this.goals=[],this.isEnd=!1,this.onEnd=new u.default,this.onStepEnd=new u.default,this.puzzle.setSize(d.SIZE),this.puzzle.addAtom(new p.default(this.stepRender,new a.default(this.color),new a.default(this.font)),new a.default(d.STEP_LOCATION),d.STEP_Z_INDEX),this.puzzle.addAtom(new p.default(this.levelRender,new a.default(this.color),new a.default(this.font)),new a.default(d.LEVEL_LOCATION),d.LEVEL_Z_INDEX)}o.default=t},{"../concept/coordinate/coordinate_value":3,"../concept/coordinate/event/event_location_setter":6,"../concept/coordinate/event/event_move":7,"../concept/coordinate/locus":8,"../concept/listener/listener_diffusion":12,"../concept/once/once_last":15,"../concept/style/color":17,"../concept/style/font":18,"../render/atom/atom_string":84,"../render/puzzle":85}],72:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("./message"),i=t("./level"),r=t("./level_creator"),a=t("../concept/coordinate/coordinate_value"),c=t("../concept/coordinate/locus"),s=t("../concept/once/once_last"),t=(l.prototype.startLevel=function(t,e,o){this.render.clear(),this.level=new i.default(e,this.render.getSize(),r.default.getLevel(t,e)),this.render.getRootPuzzle().addChild(this.level.getPuzzle(),new c.default(a.default.ORIGIN),l.PUZZLE_LEVEL_Z_INDEX),this.level.onEnd.on(o)},l.prototype.closeLevel=function(){null!=this.level&&(this.render.getRootPuzzle().removeChild(this.level.getPuzzle()),this.level=null)},l.prototype.start=function(e){var o=this;l.LoadStaticResource(this.render,function(){o.message.init(),o.render.start();var e=function(t){o.message.setText(t?"Congratulations!":"Sorry!"),o.message.show(function(){setTimeout(function(){o.message.hide(function(){o.closeLevel(),t&&o.levelIndex+1<=r.default.size()?o.levelIndex=o.levelIndex+1:o.levelIndex=1,o.startLevel(r.default.TypeCommon,String(o.levelIndex),e)})},2e3)})};o.startLevel(r.default.TypeCommon,o.levelIndex.toString(),e)},function(t){e(t)})},l.prototype.close=function(){this.closeLevel(),this.render.close()},l.LoadStaticResource=function(t,e,o){e=(new s.default).setCallback(e);r.default.LoadStaticResource(t,e.getCallback(),o),n.default.LoadStaticResource(t,e.getCallback(),o)},l.MIN_RENDER_SIZE=new a.default(10,16),l.PUZZLE_LEVEL_Z_INDEX=1,l.PUZZLE_MESSAGE_Z_INDEX=1e3,l);function l(t){var e=this;this.render=t,this.levelIndex=1,this.message=new n.default(this.render.getSize()),this.render.getRootPuzzle().addChild(this.message.getPuzzle(),new c.default(a.default.ORIGIN),l.PUZZLE_MESSAGE_Z_INDEX),this.render.onResize.on(function(){e.message.resizePuzzle(e.render.getSize()),null!=e.level&&e.level.resizePuzzle(e.render.getSize())})}o.default=t},{"../concept/coordinate/coordinate_value":3,"../concept/coordinate/locus":8,"../concept/once/once_last":15,"./level":73,"./level_creator":74,"./message":75}],73:[function(t,e,o){"use strict";o.__esModule=!0;var r=t("../engine/board/board"),a=t("../engine/score"),c=t("../concept/coordinate/coordinate_dynamic"),s=t("../concept/coordinate/coordinate_value"),l=t("../concept/coordinate/locus"),u=t("../concept/listener/listener_diffusion"),p=t("../render/puzzle"),f=t("../render/atom/atom_image"),t=(d.prototype.resizePuzzle=function(t){this.size=t},d.prototype.getPuzzle=function(){return this.puzzle},d.prototype.getName=function(){return this.name},d.LoadStaticResource=function(t,e,o){d.backgroundImageId=t.registeredImage(d.backgroundImagePath,e,o)},d.PUZZLE_BOARD_Z_INDEX=1,d.PUZZLE_SCORE_Z_INDEX=1,d.PUZZLE_BACKGROUND_IMAGE_Z_INDEX=0,d.ENGINE_SIZE=new s.default(9,12),d.SPLIT_HALF=new s.default(2,2),d.backgroundImagePath="/level_background.jpg",d);function d(t,e,o){var n=this;this.name=t,this.size=e,this.data=o,this.onEnd=new u.default,this.board=new r.default,this.board.setCells(this.data.getCells(),this.data.getBirths(),this.data.getExits()),this.score=new a.default,this.score.setOn(this.board.getOn()),this.score.setStep(this.data.getStep()),this.score.addGoal(this.data.getGoals(this.board.getOn())),this.score.setLevel(this.name),this.score.onStepEnd.on(function(){n.board.close()}),this.score.onEnd.on(function(t){n.board.close(),n.onEnd.trigger(t)});var i=new c.default(function(){return n.size.getRow()},function(){return n.size.getCol()});this.puzzle=new p.default,this.puzzle.setSize(i),this.boardLocation=new l.default(i.offset(this.board.size().negative()).split(d.SPLIT_HALF)),this.scoreLocation=new l.default(new c.default(function(){return(i.getRow()-n.score.getPuzzle().size().getRow())/2},function(){return 0})),this.backgroundSize=new l.default(i),this.puzzle.addAtom(new f.default(new l.default(d.backgroundImageId),this.backgroundSize),new l.default(s.default.ORIGIN),d.PUZZLE_BACKGROUND_IMAGE_Z_INDEX),this.puzzle.addChild(this.board.getPuzzle(),this.boardLocation,d.PUZZLE_BOARD_Z_INDEX),this.puzzle.addChild(this.score.getPuzzle(),this.scoreLocation,d.PUZZLE_SCORE_Z_INDEX),this.board.start()}o.default=t},{"../concept/coordinate/coordinate_dynamic":2,"../concept/coordinate/coordinate_value":3,"../concept/coordinate/locus":8,"../concept/listener/listener_diffusion":12,"../engine/board/board":24,"../engine/score":71,"../render/atom/atom_image":83,"../render/puzzle":85}],74:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../concept/once/once_last"),i=t("../engine/score"),r=t("../engine/board/board"),a=t("../engine/item/item_creator"),c=t("../engine/cell/cell_creator"),s=t("./level"),l=t("../level/1/level"),u=t("../level/2/level"),p=t("../level/3/level"),f=t("../level/4/level"),t=(d.LoadStaticResource=function(t,e,o){e=(new n.default).setCallback(e);a.default.LoadStaticResource(t,e.getCallback(),o),c.default.LoadStaticResource(t,e.getCallback(),o),r.default.LoadStaticResource(t,e.getCallback(),o),i.default.LoadStaticResource(t,e.getCallback(),o),s.default.LoadStaticResource(t,e.getCallback(),o)},d.size=function(){return d.LevelSize},d.getLevel=function(t,e){var o;return t===d.TypeCommon&&(o=d.getCommonLevel(e)),o},d.getCommonLevel=function(t){switch(t){case"1":return new l.default;case"2":return new u.default;case"3":return new p.default;case"4":return new f.default;default:return null}},d.LevelSize=4,d.TypeCommon="common",d);function d(){}o.default=t},{"../concept/once/once_last":15,"../engine/board/board":24,"../engine/cell/cell_creator":41,"../engine/item/item_creator":61,"../engine/score":71,"../level/1/level":76,"../level/2/level":77,"../level/3/level":78,"../level/4/level":79,"./level":73}],75:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../render/puzzle"),i=t("../render/atom/atom_image"),r=t("../render/atom/atom_string"),a=t("../concept/style/font"),c=t("../concept/style/color"),s=t("../concept/coordinate/coordinate_value"),l=t("../concept/coordinate/coordinate_dynamic"),u=t("../concept/coordinate/locus"),p=t("../concept/coordinate/event/event_move"),f=t("../concept/coordinate/event/event_location_setter"),t=(d.prototype.resizePuzzle=function(t){this.size=t},d.prototype.init=function(){this.boxPuzzle.addAtom(new i.default(new u.default(d.backgroundImageId),new u.default(this.boxSize)),new u.default(s.default.ORIGIN),d.BACKGROUND_IMAGE_Z_INDEX),this.boxPuzzle.addAtom(new r.default(this.textLocus,new u.default(this.color),new u.default(this.font)),new u.default(this.boxSize.swell(s.default.HALF)),d.TEXT_Z_INDEX)},d.prototype.setText=function(t){return this.text=t,this.textLocus.setEvent(new f.default(this.text)),this},d.prototype.show=function(t){this.boxLocationLocus.setEvent(new f.default(this.boxLocation)),this.puzzle.show(),this.boxLocationLocus.setEvent(new p.default(this.boxActiveLocation,d.SHOW_TIME_COST,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),setTimeout(function(){t()},d.SHOW_TIME_COST)},d.prototype.hide=function(t){var e=this;this.boxLocationLocus.setEvent(new p.default(this.boxLocation,d.SHOW_TIME_COST,!1,function(t,e,o,n){return t.offsetTo(e,n/o)})),setTimeout(function(){e.puzzle.hide(),t()},d.SHOW_TIME_COST)},d.prototype.getPuzzle=function(){return this.puzzle},d.LoadStaticResource=function(t,e,o){d.backgroundImageId=t.registeredImage(d.backgroundImagePath,e,o)},d.BOX_Z_INDEX=0,d.BACKGROUND_IMAGE_Z_INDEX=1,d.TEXT_Z_INDEX=2,d.SHOW_TIME_COST=200,d.ACTIVE_SIZE_COEFFICIENT=new s.default(.6,1),d.backgroundImagePath="/message_background.jpg",d);function d(t){var e=this;this.size=t,this.color=new c.default(255,255,255),this.font=(new a.default).setSize(.5).setAlign(a.default.ALIGN_CENTER),this.text="",this.textLocus=new u.default(this.text),this.puzzle=new n.default,this.puzzle.hide(),this.boxPuzzle=new n.default;t=new l.default(function(){return e.size.getRow()},function(){return e.size.getCol()});this.boxSize=t.swell(d.ACTIVE_SIZE_COEFFICIENT),this.boxLocation=new l.default(function(){return-e.boxSize.getRow()},function(){return 0}),this.boxActiveLocation=new l.default(function(){return(e.size.getRow()-e.boxSize.getRow())/2},function(){return 0}),this.puzzle.setSize(t),this.boxPuzzle.setSize(this.boxSize),this.boxLocationLocus=new u.default(this.boxLocation),this.puzzle.addChild(this.boxPuzzle,this.boxLocationLocus,d.BOX_Z_INDEX)}o.default=t},{"../concept/coordinate/coordinate_dynamic":2,"../concept/coordinate/coordinate_value":3,"../concept/coordinate/event/event_location_setter":6,"../concept/coordinate/event/event_move":7,"../concept/coordinate/locus":8,"../concept/style/color":17,"../concept/style/font":18,"../render/atom/atom_image":83,"../render/atom/atom_string":84,"../render/puzzle":85}],76:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/coordinate_value"),i=t("../../engine/board/board_cells"),r=t("../../engine/board/board_births"),a=t("../../engine/board/board_exits"),c=t("../../engine/board/board_check"),s=t("../../engine/board/board_precheck"),l=t("../../engine/goal/goal_item_cleared"),u=t("../../engine/birth/birth_eliminate"),p=t("../../engine/cell/cell_land"),f=t("../../engine/cell/cell_birth"),d=t("../../engine/cell/cell_empty"),h=t("../../engine/item/item_creator"),t=(_.prototype.getStep=function(){return _.STEPS},_.prototype.getExits=function(){return this.initExits(),this.exits},_.prototype.getBirths=function(){return this.initBirths(),this.births},_.prototype.getCells=function(){return this.initCells(),this.cells},_.prototype.getGoals=function(t){return this.initGoals(t),[this.goalApple]},_.prototype.initExits=function(){null==this.exits&&(this.exits=new a.default([]))},_.prototype.createBirth=function(){null==this.birth&&(this.birth=new u.default([h.default.WATER]))},_.prototype.initBirths=function(){if(null==this.births){this.createBirth();for(var t=[],e=0;e<_.Size.getCol();e++){var o=new f.default;o.setBirth(this.birth,new n.default(0,e)),t.push(o)}this.births=new r.default(t)}},_.prototype.getCellArray=function(){this.createBirth();for(var t=[],e=0;e<_.Size.getRow();e++){t.push([]);for(var o=0;o<_.Size.getCol();o++){var n=void 0;0==e&&0==o||0==e&&o==_.Size.getCol()-1||e==_.Size.getRow()-1&&0==o||e==_.Size.getRow()-1&&o==_.Size.getCol()-1?n=d.default.getEmpty():(n=new p.default).setItem(this.birth.popItem()),t[e].push(n)}}return t},_.prototype.initCells=function(){if(null==this.cells){for(var t=new i.default,e=new c.default(t),o=new s.default(t);t.setCells(this.getCellArray()),null!=e.check()||null==o.precheck(););this.cells=t}},_.prototype.initGoals=function(t){null==this.goalApple&&(this.goalApple=new l.default(t,h.default.createItem(h.default.APPLE),_.GOAL_APPLE_SIZE))},_.Size=new n.default(7,7),_.STEPS=23,_.GOAL_APPLE_SIZE=16,_);function _(){}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../engine/birth/birth_eliminate":20,"../../engine/board/board_births":26,"../../engine/board/board_cells":27,"../../engine/board/board_check":28,"../../engine/board/board_exits":31,"../../engine/board/board_precheck":36,"../../engine/cell/cell_birth":40,"../../engine/cell/cell_empty":42,"../../engine/cell/cell_land":43,"../../engine/goal/goal_item_cleared":47,"../../engine/item/item_creator":61}],77:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/coordinate_value"),i=t("../../engine/board/board_cells"),r=t("../../engine/board/board_births"),a=t("../../engine/board/board_exits"),c=t("../../engine/board/board_check"),s=t("../../engine/board/board_precheck"),l=t("../../engine/goal/goal_item_cleared"),u=t("../../engine/birth/birth_eliminate"),p=t("../../engine/cell/cell_land"),f=t("../../engine/cell/cell_birth"),d=t("../../engine/cell/cell_empty"),h=t("../../engine/item/item_creator"),t=(_.prototype.getStep=function(){return _.STEPS},_.prototype.getExits=function(){return this.initExits(),this.exits},_.prototype.getBirths=function(){return this.initBirths(),this.births},_.prototype.getCells=function(){return this.initCells(),this.cells},_.prototype.getGoals=function(t){return this.initGoals(t),[this.goalBlueBerry]},_.prototype.initExits=function(){null==this.exits&&(this.exits=new a.default([]))},_.prototype.createBirth=function(){null==this.birth&&(this.birth=new u.default([h.default.WATER]))},_.prototype.initBirths=function(){if(null==this.births){this.createBirth();for(var t=[],e=0;e<_.Size.getCol();e++){var o=new f.default;o.setBirth(this.birth,new n.default(0,e)),t.push(o)}this.births=new r.default(t)}},_.prototype.getCellArray=function(){this.createBirth();for(var t=[],e=0;e<_.Size.getRow();e++){t.push([]);for(var o=0;o<_.Size.getCol();o++){var n=void 0;0==e&&0==o||0==e&&1==o||0==e&&o==_.Size.getCol()-2||0==e&&o==_.Size.getCol()-1||1==e&&0==o||1==e&&o==_.Size.getCol()-1||e==_.Size.getRow()-2&&0==o||e==_.Size.getRow()-2&&o==_.Size.getCol()-1||e==_.Size.getRow()-1&&0==o||e==_.Size.getRow()-1&&1==o||e==_.Size.getRow()-1&&o==_.Size.getCol()-2||e==_.Size.getRow()-1&&o==_.Size.getCol()-1?n=d.default.getEmpty():(n=new p.default).setItem(this.birth.popItem()),t[e].push(n)}}return t},_.prototype.initCells=function(){if(null==this.cells){for(var t=new i.default,e=new c.default(t),o=new s.default(t);t.setCells(this.getCellArray()),null!=e.check()||null==o.precheck(););this.cells=t}},_.prototype.initGoals=function(t){null==this.goalBlueBerry&&(this.goalBlueBerry=new l.default(t,h.default.createItem(h.default.BLUEBERRY),_.GOAL_BLUEBERRY_SIZE))},_.Size=new n.default(9,9),_.STEPS=27,_.GOAL_BLUEBERRY_SIZE=27,_);function _(){}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../engine/birth/birth_eliminate":20,"../../engine/board/board_births":26,"../../engine/board/board_cells":27,"../../engine/board/board_check":28,"../../engine/board/board_exits":31,"../../engine/board/board_precheck":36,"../../engine/cell/cell_birth":40,"../../engine/cell/cell_empty":42,"../../engine/cell/cell_land":43,"../../engine/goal/goal_item_cleared":47,"../../engine/item/item_creator":61}],78:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/coordinate_value"),i=t("../../engine/board/board_cells"),r=t("../../engine/board/board_births"),a=t("../../engine/board/board_exits"),c=t("../../engine/board/board_check"),s=t("../../engine/board/board_precheck"),l=t("../../engine/goal/goal_item_cleared"),u=t("../../engine/birth/birth_eliminate"),p=t("../../engine/cell/cell_land"),f=t("../../engine/cell/cell_birth"),d=t("../../engine/cell/cell_empty"),h=t("../../engine/item/item_creator"),t=(_.prototype.getStep=function(){return _.STEPS},_.prototype.getExits=function(){return this.initExits(),this.exits},_.prototype.getBirths=function(){return this.initBirths(),this.births},_.prototype.getCells=function(){return this.initCells(),this.cells},_.prototype.getGoals=function(t){return this.initGoals(t),[this.goalApple,this.goalLeaf]},_.prototype.initExits=function(){null==this.exits&&(this.exits=new a.default([]))},_.prototype.createBirth=function(){null==this.birth&&(this.birth=new u.default)},_.prototype.initBirths=function(){if(null==this.births){this.createBirth();for(var t=[],e=0;e<_.Size.getCol();e++){var o=new f.default;3<e&&e<8?o.setBirth(this.birth,new n.default(1,e)):o.setBirth(this.birth,new n.default(0,e)),t.push(o)}this.births=new r.default(t)}},_.prototype.getCellArray=function(){this.createBirth();for(var t=[],e=0;e<_.Size.getRow();e++){t.push([]);for(var o=0;o<_.Size.getCol();o++){var n=void 0;0==e&&0<=[4,5,6,7].indexOf(o)||e==_.Size.getRow()-1&&0<=[4,5,6,7].indexOf(o)||0==o&&0<=[3,4,5].indexOf(e)||o==_.Size.getCol()-1&&0<=[3,4,5].indexOf(e)?n=d.default.getEmpty():(n=new p.default).setItem(this.birth.popItem()),t[e].push(n)}}return t},_.prototype.initCells=function(){if(null==this.cells){for(var t=new i.default,e=new c.default(t),o=new s.default(t);t.setCells(this.getCellArray()),null!=e.check()||null==o.precheck(););this.cells=t}},_.prototype.initGoals=function(t){null==this.goalApple&&(this.goalApple=new l.default(t,h.default.createItem(h.default.APPLE),_.GOAL_APPLE_SIZE)),null==this.goalLeaf&&(this.goalLeaf=new l.default(t,h.default.createItem(h.default.LEAF),_.GOAL_LEAF_SIZE))},_.Size=new n.default(9,12),_.STEPS=28,_.GOAL_APPLE_SIZE=30,_.GOAL_LEAF_SIZE=30,_);function _(){}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../engine/birth/birth_eliminate":20,"../../engine/board/board_births":26,"../../engine/board/board_cells":27,"../../engine/board/board_check":28,"../../engine/board/board_exits":31,"../../engine/board/board_precheck":36,"../../engine/cell/cell_birth":40,"../../engine/cell/cell_empty":42,"../../engine/cell/cell_land":43,"../../engine/goal/goal_item_cleared":47,"../../engine/item/item_creator":61}],79:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../../concept/coordinate/coordinate_value"),i=t("../../engine/board/board_cells"),r=t("../../engine/board/board_births"),a=t("../../engine/board/board_exits"),c=t("../../engine/board/board_check"),s=t("../../engine/board/board_precheck"),l=t("../../engine/goal/goal_item_cleared"),u=t("../../engine/birth/birth_eliminate"),p=t("../../engine/cell/cell_land"),f=t("../../engine/cell/cell_birth"),d=t("../../engine/cell/cell_empty"),h=t("../../engine/item/item_creator"),t=(_.prototype.getStep=function(){return _.STEPS},_.prototype.getExits=function(){return this.initExits(),this.exits},_.prototype.getBirths=function(){return this.initBirths(),this.births},_.prototype.getCells=function(){return this.initCells(),this.cells},_.prototype.getGoals=function(t){return this.initGoals(t),[this.goalBuleberry,this.goalFlower]},_.prototype.initExits=function(){null==this.exits&&(this.exits=new a.default([]))},_.prototype.createBirth=function(){null==this.birth&&(this.birth=new u.default([h.default.PEAR]))},_.prototype.initBirths=function(){if(null==this.births){this.createBirth();for(var t,e=[],o=2;o<_.Size.getCol()-2;o++)5!=o&&6!=o&&((t=new f.default).setBirth(this.birth,new n.default(0,o)),e.push(t));this.births=new r.default(e)}},_.prototype.getCellArray=function(){this.createBirth();for(var t=[],e=0;e<_.Size.getRow();e++){t.push([]);for(var o=0;o<_.Size.getCol();o++){var n=void 0;e+o<2||15<e+o||9<o-e||o-e<-4||0==e&&(5==o||6==o)?n=d.default.getEmpty():(n=new p.default).setItem(this.birth.popItem()),t[e].push(n)}}return t},_.prototype.initCells=function(){if(null==this.cells){for(var t=new i.default,e=new c.default(t),o=new s.default(t);t.setCells(this.getCellArray()),null!=e.check()||null==o.precheck(););this.cells=t}},_.prototype.initGoals=function(t){null==this.goalBuleberry&&(this.goalBuleberry=new l.default(t,h.default.createItem(h.default.BLUEBERRY),_.GOAL_BLUEBERRY_SIZE)),null==this.goalFlower&&(this.goalFlower=new l.default(t,h.default.createItem(h.default.FLOWER),_.GOAL_FLOWER_SIZE))},_.Size=new n.default(8,12),_.STEPS=25,_.GOAL_BLUEBERRY_SIZE=50,_.GOAL_FLOWER_SIZE=50,_);function _(){}o.default=t},{"../../concept/coordinate/coordinate_value":3,"../../engine/birth/birth_eliminate":20,"../../engine/board/board_births":26,"../../engine/board/board_cells":27,"../../engine/board/board_check":28,"../../engine/board/board_exits":31,"../../engine/board/board_precheck":36,"../../engine/cell/cell_birth":40,"../../engine/cell/cell_empty":42,"../../engine/cell/cell_land":43,"../../engine/goal/goal_item_cleared":47,"../../engine/item/item_creator":61}],80:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../platform/canvas/render_canvas"),i=t("../game/game"),t=(r.ContainerId="match_three_game",r.StaticResourcePrefix="./resource",r);function r(){var t=document.getElementById(r.ContainerId),t=new n.default(t,i.default.MIN_RENDER_SIZE,r.StaticResourcePrefix);new i.default(t).start(function(t){console.log(t)})}new(o.default=t)},{"../game/game":72,"../platform/canvas/render_canvas":81}],81:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var a,c=t("../../concept/coordinate/coordinate_value"),r=t("../../render/render_adapter"),i=(a=r.default,i(s,a),s.prototype.initListener=function(){function e(t){i.listenerOn&&r.triggerMouseDown(i.getLocationByPixelLocation(t),Date.now())}function o(t){i.listenerOn&&r.triggerMouseUp(i.getLocationByPixelLocation(t),Date.now())}function n(t){i.listenerOn&&r.triggerMouseMove(i.getLocationByPixelLocation(t),Date.now())}var i=this,r=this.getRootPuzzle();this.canvas.ontouchstart=function(t){e(new c.default(t.changedTouches[0].pageY,t.changedTouches[0].pageX))},this.canvas.ontouchend=function(t){o(new c.default(t.changedTouches[0].pageY,t.changedTouches[0].pageX))},this.canvas.ontouchmove=function(t){n(new c.default(t.changedTouches[0].pageY,t.changedTouches[0].pageX))},this.canvas.onmousedown=function(t){e(new c.default(t.offsetY,t.offsetX))},this.canvas.onmouseup=function(t){o(new c.default(t.offsetY,t.offsetX))},this.canvas.onmousemove=function(t){n(new c.default(t.offsetY,t.offsetX))}},s.prototype.getLocationByPixelLocation=function(t){return t.split(this.unitPixel)},s.prototype.getCanvasElement=function(){return this.canvas},s.prototype.getImage=function(t){return this.HTMLImages[t]},s.prototype.registeredImage=function(e,o,n){var i=this,r=a.prototype.registeredImage.call(this,e,function(){var t=document.createElement("img");(i.HTMLImages[r]=t).onload=function(){return o()},t.onerror=function(t){return n(t.error)},t.src=i.imagePrefix+e},n);return r},s.prototype.start=function(){var e=this;a.prototype.start.call(this);var o=function(t){e.clear(),e.draw(Date.now()),e.renderRequestId=requestAnimationFrame(o)};this.renderRequestId=requestAnimationFrame(o),this.listenerOn=!0},s.prototype.close=function(){this.listenerOn=!1,cancelAnimationFrame(this.renderRequestId),a.prototype.close.call(this)},s.prototype.clear=function(){a.prototype.clear.call(this),this.pen.clearRect(c.default.ORIGIN.getCol(),c.default.ORIGIN.getRow(),this.pixel.getCol(),this.pixel.getRow())},s.prototype.drawImage=function(t,e,o){t!=r.default.IMAGE_ID_EMPTY&&(e=e.swell(this.unitPixel),o=o.swell(this.unitPixel),this.pen.drawImage(this.getImage(t),e.getCol(),e.getRow(),o.getCol(),o.getRow()))},s.prototype.drawString=function(t,e,o,n){e=e.swell(this.unitPixel);this.pen.fillStyle=n.toRGBA(),this.pen.font=o.size*this.unitPixel.getRow()+"px "+o.family,this.pen.textAlign=o.align,this.pen.textBaseline=o.baseline,this.pen.fillText(t,e.getCol(),e.getRow())},s.getRenderSize=function(t,e){return 1<e.getCol()/e.getRow()/(t.getCol()/t.getRow())?new c.default(t.getRow(),e.getCol()/e.getRow()*t.getRow()):new c.default(e.getRow()/e.getCol()*t.getCol(),t.getCol())},s);function s(e,o,t){var n=a.call(this,s.getRenderSize(o,new c.default(e.clientHeight,e.clientWidth)))||this;return n.container=e,n.minSize=o,n.imagePrefix=t,n.listenerOn=!1,n.HTMLImages=[],n.pixel=new c.default(e.clientHeight,e.clientWidth),n.unitPixel=n.pixel.split(n.getSize()),n.canvas=document.createElement("canvas"),n.canvas.width=e.clientWidth,n.canvas.height=e.clientHeight,n.canvas.style.position="absolute",n.canvas.style.width="100%",n.canvas.style.height="100%",n.canvas.style.top="0px",n.canvas.style.left="0px",n.pen=n.canvas.getContext("2d"),n.initListener(),e.appendChild(n.canvas),window.onresize=function(t){n.pixel=new c.default(e.clientHeight,e.clientWidth),n.setSize(s.getRenderSize(o,n.pixel)),n.unitPixel=n.pixel.split(n.getSize()),n.canvas.width=e.clientWidth,n.canvas.height=e.clientHeight,n.onResize.trigger()},n}o.default=i},{"../../concept/coordinate/coordinate_value":3,"../../render/render_adapter":86}],82:[function(t,e,o){"use strict";o.__esModule=!0;function n(){}o.default=n},{}],83:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./atom_adapter"),i=(r=t.default,i(a,r),a.prototype.draw=function(t,e,o){t.drawImage(this.imageId.getLocation(o),e,this.imageSize.getLocation(o))},a);function a(t,e){var o=r.call(this)||this;return o.imageId=t,o.imageSize=e,o}o.default=i},{"./atom_adapter":82}],84:[function(t,e,o){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});o.__esModule=!0;var r,t=t("./atom_adapter"),i=(r=t.default,i(a,r),a.prototype.draw=function(t,e,o){t.drawString(this.text.getLocation(o).toString(),e,this.font.getLocation(o),this.color.getLocation(o))},a);function a(t,e,o){var n=r.call(this)||this;return n.text=t,n.color=e,n.font=o,n}o.default=i},{"./atom_adapter":82}],85:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("../concept/coordinate/coordinate_value"),i=t("../concept/linked_list/linked_list"),r=t("./render_locus"),t=(a.prototype.triggerLocationEvent=function(t,e,o){var n=this.locationEventListener[t],i=!0;null!=n&&(i=n(e)),!i||null!=(i=this.triggerChild(e,o))&&i.data.triggerLocationEvent(t,e.offset(i.location.negative()),o)},a.prototype.onLocationEvent=function(t,e){this.locationEventListener[t]=e},a.prototype.triggerMouseDown=function(t,e){this.triggerLocationEvent(a.MouseDown,t,e)},a.prototype.onMouseDown=function(t){this.onLocationEvent(a.MouseDown,t)},a.prototype.triggerMouseUp=function(t,e){this.triggerLocationEvent(a.MouseUp,t,e)},a.prototype.onMouseUp=function(t){this.onLocationEvent(a.MouseUp,t)},a.prototype.triggerMouseMove=function(t,e){this.triggerLocationEvent(a.MouseMove,t,e)},a.prototype.onMouseMove=function(t){this.onLocationEvent(a.MouseMove,t)},a.prototype.children=function(){return this.puzzles},a.prototype.allAtoms=function(){return this.atoms},a.prototype.addAtom=function(t,e,o){null!=t&&this.atoms.insertBy(new r.default(t,e,o),function(t){return o<t.zIndex})},a.prototype.removeAtom=function(e){null!=e&&this.atoms.removeBy(function(t){return e==t.data})},a.prototype.triggerChild=function(n,i){var r=null;return this.puzzles.iterate(function(t,e){var o=e.getPostion(i);n.isIn(o.location,o.location.offset(e.data.size()))&&(r=o)}),r},a.prototype.addChild=function(t,e,o){null!=t&&this.puzzles.insertBy(new r.default(t,e,o),function(t){return o<t.zIndex})},a.prototype.removeChild=function(e){null!=e&&this.puzzles.removeBy(function(t){return e==t.data})},a.prototype.setSize=function(t){this.renderSize=t},a.prototype.size=function(){return this.renderSize},a.prototype.hide=function(){this.showState=!1},a.prototype.show=function(){this.showState=!0},a.prototype.isShow=function(){return this.showState},a.prototype.payAtoms=function(n,i,r,a){this.isShow()&&(this.atoms.iterate(function(t,e){e=e.getPostion(n).offsetLocation(r).offsetZIndex(i);a.push(e)}),this.puzzles.iterate(function(t,e){var o=e.getPostion(n).offsetLocation(r).offsetZIndex(i);e.data.payAtoms(n,o.zIndex,o.location,a)}))},a.MouseDown=1,a.MouseUp=2,a.MouseMove=3,a);function a(){this.locationEventListener={},this.atoms=new i.default,this.puzzles=new i.default,this.renderSize=n.default.ORIGIN,this.showState=!0}o.default=t},{"../concept/coordinate/coordinate_value":3,"../concept/linked_list/linked_list":9,"./render_locus":87}],86:[function(t,e,o){"use strict";o.__esModule=!0;var i=t("../concept/coordinate/coordinate_value"),n=t("./puzzle"),r=t("../concept/once/once_adapter"),a=t("../concept/listener/listener_diffusion"),t=(c.prototype.setSize=function(t){this.size=t},c.prototype.getSize=function(){return this.size},c.prototype.registeredImage=function(t,e,o){var n=this.images.length;return this.images.push(t),r.default.delay(e)(),n},c.prototype.getRootPuzzle=function(){return this.rootPuzzle},c.prototype.start=function(){},c.prototype.clear=function(){},c.prototype.close=function(){this.images=[],this.rootPuzzle=new n.default},c.prototype.draw=function(t){var e=[];this.getRootPuzzle().payAtoms(t,0,i.default.ORIGIN,e),e.sort(function(t,e){return t.zIndex-e.zIndex});for(var o=0;o<e.length;o++){var n=e[o];n.data.draw(this,n.location,t)}},c.IMAGE_ID_EMPTY=-1,c);function c(t){this.onResize=new a.default,this.images=[],this.rootPuzzle=new n.default,this.setSize(t)}o.default=t},{"../concept/coordinate/coordinate_value":3,"../concept/listener/listener_diffusion":12,"../concept/once/once_adapter":13,"./puzzle":85}],87:[function(t,e,o){"use strict";o.__esModule=!0;var n=t("./render_position"),t=(i.prototype.getPostion=function(t){return new n.default(this.data,this.locus.getLocation(t),this.zIndex)},i);function i(t,e,o){this.data=t,this.locus=e,this.zIndex=o}o.default=t},{"./render_position":88}],88:[function(t,e,o){"use strict";o.__esModule=!0;var n=(i.prototype.offsetLocation=function(t){return this.location=this.location.offset(t),this},i.prototype.offsetZIndex=function(t){return this.zIndex=this.zIndex+t,this},i);function i(t,e,o){this.data=t,this.location=e,this.zIndex=o}o.default=n},{}]},{},[80]);